<!DOCTYPE html>
<html lang="en">
  <meta charset="utf-8" />
  <head>
    <title>Cannon</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.min.js" integrity="sha384-cn7l7gDp0eyniUwwAZgrzD06kc/tftFf19TOAs2zVinnD/C7E91j9yyk5//jjpt/" crossorigin="anonymous"></script>
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
    <style>
      body {
        text-align: center;
        position: relative;
        padding: 0 0;
      }
      .center{
        position: relative;
  top: 50%;
  transform: translateY(-50%);
      }
      #cannon {
        margin:0;
        text-align: center;
        height:100vh;
        width: 100vw;
        position: absolute;
        top: 50%;
      }
      table {
        text-align: center;
        margin: 0px auto;
      }
      tr,
      td {
        text-align: center;
        border: 1px solid black;
      }
      td{
        height:min(8.5vh, 10vw);
        width:min(8.5vh, 10vw);
        text-align: center;
      }
      .rotate {

        transform: rotate(-180deg);


        /* Legacy vendor prefixes that you probably don't need... */

        /* Safari */
        -webkit-transform: rotate(-180deg);

        /* Firefox */
        -moz-transform: rotate(-180deg);

        /* IE */
        -ms-transform: rotate(-180deg);

        /* Opera */
        -o-transform: rotate(-180deg);

        /* Internet Explorer */
        filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3);

      }
    </style>
  </head>
  <body>
    <div id="cannon">
      <div class='center'>
      <h3 class="rotate" style="text-align: center">Player: {{player}}, Round: {{round}}</h3>
      <table>
        <tr v-for="(row, i) in grid">
          <td v-for="(col, j)  in row" v-on:click="selected(i, j)">{{col}}</td>
        </tr>
      </table>
      <h3 style="text-align: center">Player: {{player}}, Round: {{round}}</h3>
      </div>
    </div>
    <script type="module">
      import { Cannon } from "./cannon.js";
      const update = () => {
        app.grid = app.grid.slice();
        app.player = cannon.currentPlayer;
        app.round = cannon.round;
      };
      const cannon = new Cannon();
      const app = new Vue({
        el: "#cannon",
        data: {
          grid: cannon.grid,
          player: cannon.currentPlayer,
          round: cannon.round,
        },
        methods: {
          selected: function (i, j) {
            const [moves, gameOver] = cannon.select(i, j);
            if (gameOver) {
              Swal.fire(`Player ${cannon.currentPlayer} wins!!`);
            }
            update();
          },
        },
      });
    </script>
  </body>
</html>
